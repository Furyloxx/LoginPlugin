/*
 * This file was generated by the Gradle 'init' task.
 */

allprojects {
    group = 'com.nickuc.login'
    version = '1.6.3'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    repositories {
        mavenCentral()
        maven { url = uri('https://hub.spigotmc.org/nexus/content/repositories/snapshots/') }
        maven { url = uri('https://repo.codemc.org/repository/maven-public') }
    }

    dependencies {
        def lombok = 'org.projectlombok:lombok:1.18.24'
        compileOnly lombok
        annotationProcessor lombok
        testCompileOnly lombok
        testAnnotationProcessor lombok
    }

    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
    compileJava.options.encoding = 'UTF-8'

    processResources {
        from(sourceSets.main.resources.srcDirs) {
            expand 'pluginVersion': version
            include 'plugin.yml'
        }
    }

    jar {
        from {

            configurations.runtime.collect {
                it.isDirectory() ? it : zipTree(it)
            }

            configurations.compile.collect {
                it.isDirectory() ? it : zipTree(it)
            }
        }

        exclude 'META-INF/*.RSA', 'META-INF/*.SF', 'META-INF/*.DSA'
    }

}
